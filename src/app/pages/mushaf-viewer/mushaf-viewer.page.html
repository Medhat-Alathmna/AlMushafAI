<ion-header>
  <ion-toolbar color="light">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/surah-list"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ surahName || 'عارض المصحف' }}</ion-title>
    <ion-segment class="view-toggle" [value]="viewMode" (ionChange)="onModeChange($event)" slot="end" dir="rtl">
      <ion-segment-button value="image">
        <ion-icon name="book-outline"></ion-icon>
        <ion-label>صور</ion-label>
      </ion-segment-button>
      <ion-segment-button value="text">
        <ion-icon name="reader-outline"></ion-icon>
        <ion-label>نص</ion-label>
      </ion-segment-button>
    </ion-segment>
  </ion-toolbar>
  
</ion-header>

<ion-content [fullscreen]="true" class="ion-text-center mushaf-content">
  <ng-container *ngIf="viewMode === 'image'; else textView">
    <swiper-container
      [modules]="[Navigation, Pagination, Zoom, Keyboard]"
      [navigation]="true"
      [pagination]="{ clickable: true }"
      [zoom]="true"
      [keyboard]="{ enabled: true }"
      [direction]="'horizontal'"
      dir="rtl"
      class="mushaf-swiper"
      (slideChange)="onSlideChange($event)"
    >
      <swiper-slide *ngFor="let page of pages; let i = index; trackBy: trackByIndex">
        <ion-card class="mushaf-page">
          <ion-card-content>
            <ion-img
              [src]="getImageSrc(page)"
              alt="الصفحة {{ page }}"
              class="page-img"
            ></ion-img>
          </ion-card-content>
        </ion-card>
      </swiper-slide>
    </swiper-container>

    <ion-footer class="page-footer">
      <ion-toolbar color="light">
        <ion-title size="small">
          الصفحة {{ currentPage + startPage - 1 }} / {{ endPage }}
        </ion-title>
      </ion-toolbar>
    </ion-footer>
  </ng-container>

  <ng-template #textView>
    <div class="quran-text-container" dir="rtl">
      <p class="ayah" *ngFor="let a of ayat; let i = index; trackBy: trackByIndex">
        <span class="ayah-number">{{ a.index }}</span>
        {{ a.text }}
      </p>
    </div>
  </ng-template>
</ion-content>

